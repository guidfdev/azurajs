---
title: Decorators
description: Guia completo de todos os decorators do AzuraJS
icon: Tag
---

# Decorators üè∑Ô∏è

AzuraJS fornece um rico conjunto de decorators TypeScript para construir APIs elegantes e type-safe.

## Decorators de Classe üéØ

### @Controller

Define uma classe controller com um caminho base opcional.

```typescript
@Controller(prefix?: string)
```

**Exemplos:**

```typescript
import { Controller } from "azurajs/decorators";

// Com prefixo
@Controller("/api/users")
export class UserController {}

// Sem prefixo
@Controller()
export class RootController {}

// Caminho aninhado
@Controller("/api/v1/admin/users")
export class AdminUserController {}
```

## Decorators de M√©todo üõ£Ô∏è

Decorators de m√©todo definem rotas HTTP para m√©todos do controller.

### @Get

Define uma rota GET.

```typescript
@Get(path?: string)
```

**Exemplos:**

```typescript
import { Controller, Get } from "azurajs/decorators";

@Controller("/api/users")
export class UserController {
  @Get()  // GET /api/users
  getAll() {}

  @Get("/:id")  // GET /api/users/:id
  getOne() {}

  @Get("/search")  // GET /api/users/search
  search() {}
}
```

### @Post

Define uma rota POST.

```typescript
@Post(path?: string)
```

**Exemplo:**

```typescript
import { Post, Body } from "azurajs/decorators";

@Post()  // POST /api/users
createUser(@Body() data: any) {
  return { id: Date.now(), ...data };
}
```

### @Put

Define uma rota PUT para atualiza√ß√µes completas.

```typescript
@Put(path?: string)
```

**Exemplo:**

```typescript
@Put("/:id")  // PUT /api/users/:id
updateUser(@Param("id") id: string, @Body() data: any) {
  return { id, ...data };
}
```

### @Patch

Define uma rota PATCH para atualiza√ß√µes parciais.

```typescript
@Patch(path?: string)
```

**Exemplo:**

```typescript
@Patch("/:id")  // PATCH /api/users/:id
patchUser(@Param("id") id: string, @Body() data: Partial<User>) {
  return { id, ...data };
}
```

### @Delete

Define uma rota DELETE.

```typescript
@Delete(path?: string)
```

**Exemplo:**

```typescript
@Delete("/:id")  // DELETE /api/users/:id
deleteUser(@Param("id") id: string) {
  return { message: "Usu√°rio deletado" };
}
```

### @Head

Define uma rota HEAD (para verificar exist√™ncia de recurso).

```typescript
@Head(path?: string)
```

**Exemplo:**

```typescript
@Head("/:id")  // HEAD /api/users/:id
checkExists(@Param("id") id: string, @Res() res: ResponseServer) {
  const exists = users.some(u => u.id === id);
  res.status(exists ? 200 : 404).end();
}
```

### @Options

Define uma rota OPTIONS (tipicamente para preflight CORS).

```typescript
@Options(path?: string)
```

**Exemplo:**

```typescript
@Options()  // OPTIONS /api/users
handleOptions(@Res() res: ResponseServer) {
  res.set("Allow", "GET, POST, PUT, DELETE").end();
}
```

## Decorators de Par√¢metro üîñ

Decorators de par√¢metro injetam dados nos par√¢metros de m√©todos do controller.

### @Req

Injeta o objeto de requisi√ß√£o completo.

```typescript
@Req() req: RequestServer
```

**Exemplo:**

```typescript
@Get("/info")
getInfo(@Req() req: RequestServer) {
  return {
    method: req.method,
    url: req.url,
    headers: req.headers
  };
}
```

### @Res

Injeta o objeto de resposta para controle manual.

```typescript
@Res() res: ResponseServer
```

**Exemplo:**

```typescript
@Get("/download")
download(@Res() res: ResponseServer) {
  res.setHeader("Content-Type", "application/octet-stream");
  res.setHeader("Content-Disposition", "attachment; filename=arquivo.zip");
  res.send(fileBuffer);
}
```

### @Body

Extrai o corpo da requisi√ß√£o (automaticamente parseado para JSON e form data).

```typescript
@Body() body: any
```

**Exemplos:**

```typescript
// Corpo completo
@Post()
create(@Body() data: CreateUserDto) {
  return { id: Date.now(), ...data };
}

// Acessar propriedades do corpo diretamente
@Post()
create(@Body() { name, email }: { name: string; email: string }) {
  return { name, email };
}
```

### @Param

Extrai par√¢metros de rota do caminho da URL.

```typescript
@Param(name?: string) param: string
```

**Exemplos:**

```typescript
// Par√¢metro √∫nico
@Get("/:id")
getUser(@Param("id") id: string) {
  return { id };
}

// M√∫ltiplos par√¢metros
@Get("/:userId/posts/:postId")
getPost(
  @Param("userId") userId: string,
  @Param("postId") postId: string
) {
  return { userId, postId };
}

// Todos os par√¢metros
@Get("/:userId/posts/:postId")
getPost(@Param() params: Record<string, string>) {
  return params;  // { userId: "1", postId: "2" }
}
```

### @Query

Extrai par√¢metros de query string.

```typescript
@Query(name?: string) query: string
```

**Exemplos:**

```typescript
// Par√¢metro de query √∫nico
@Get("/search")
search(@Query("q") searchTerm: string) {
  return { results: [], query: searchTerm };
}

// M√∫ltiplos par√¢metros de query
@Get("/filter")
filter(
  @Query("status") status: string,
  @Query("limit") limit: string
) {
  return { status, limit };
}

// Todos os par√¢metros de query
@Get("/search")
search(@Query() query: Record<string, string>) {
  // GET /api/users/search?q=john&limit=10
  return query;  // { q: "john", limit: "10" }
}
```

### @Headers

Extrai cabe√ßalhos da requisi√ß√£o.

```typescript
@Headers(name?: string) header: string | undefined
```

**Exemplos:**

```typescript
// Cabe√ßalho √∫nico
@Get("/protected")
getData(@Headers("authorization") auth: string) {
  if (!auth) {
    throw new HttpError(401, "N√£o autorizado");
  }
  return { data: "secreto" };
}

// M√∫ltiplos cabe√ßalhos
@Get("/info")
getInfo(
  @Headers("user-agent") ua: string,
  @Headers("accept-language") lang: string
) {
  return { userAgent: ua, language: lang };
}

// Todos os cabe√ßalhos
@Get("/headers")
getAllHeaders(@Headers() headers: Record<string, string>) {
  return { headers };
}
```

### @Ip

Extrai o endere√ßo IP do cliente.

```typescript
@Ip() ip: string
```

**Exemplo:**

```typescript
@Post("/login")
login(@Body() credentials: any, @Ip() ip: string) {
  console.log(`Tentativa de login de ${ip}`);
  // Autenticar usu√°rio
  return { success: true };
}
```

### @UserAgent

Extrai o cabe√ßalho User-Agent.

```typescript
@UserAgent() userAgent: string
```

**Exemplo:**

```typescript
@Get("/stats")
trackVisit(@UserAgent() ua: string, @Ip() ip: string) {
  console.log(`Visita de ${ip} usando ${ua}`);
  return { message: "Visita registrada" };
}
```

### @Next

Injeta a fun√ß√£o next para cadeias de middleware.

```typescript
@Next() next: (err?: unknown) => void
```

**Exemplo:**

```typescript
@Get("/async")
async handleAsync(
  @Req() req: RequestServer,
  @Res() res: ResponseServer,
  @Next() next: () => void
) {
  try {
    const data = await fetchData();
    res.json({ data });
  } catch (error) {
    next(error);
  }
}
```

## Combinando Decorators üîó

Voc√™ pode combinar m√∫ltiplos decorators de par√¢metro em um m√©todo:

```typescript
@Controller("/api/posts")
export class PostController {
  @Get("/:id/comments")
  getComments(
    @Param("id") postId: string,
    @Query("limit") limit: string,
    @Query("offset") offset: string,
    @Headers("authorization") auth: string,
    @Ip() ip: string,
    @Res() res: ResponseServer
  ) {
    // Verificar autentica√ß√£o
    if (!auth) {
      return res.status(401).json({ error: "N√£o autorizado" });
    }

    // Registrar requisi√ß√£o
    console.log(`${ip} solicitou coment√°rios do post ${postId}`);

    // Retornar coment√°rios
    const comments = getCommentsFromDB(postId, Number(limit), Number(offset));
    res.json({ comments });
  }

  @Post("/:id/comments")
  createComment(
    @Param("id") postId: string,
    @Body() data: CreateCommentDto,
    @Ip() ip: string,
    @UserAgent() ua: string,
    @Res() res: ResponseServer
  ) {
    const comment = {
      id: Date.now(),
      postId,
      ...data,
      metadata: { ip, userAgent: ua }
    };

    res.status(201).json({ comment });
  }
}
```

## Ordem de Execu√ß√£o dos Decorators ‚ö°

Decorators s√£o executados nesta ordem:

1. **Decorator de Classe** (`@Controller`) - Registra o controller
2. **Decorators de M√©todo** (`@Get`, `@Post`, etc.) - Registra rotas
3. **Decorators de Par√¢metro** (`@Body`, `@Param`, etc.) - Executados em runtime quando a rota √© chamada

## Seguran√ßa de Tipos com Decorators üîí

Use interfaces TypeScript para melhor seguran√ßa de tipos:

```typescript
interface CreatePostDto {
  title: string;
  content: string;
  tags: string[];
}

interface UpdatePostDto {
  title?: string;
  content?: string;
  tags?: string[];
}

@Controller("/api/posts")
export class PostController {
  @Post()
  create(@Body() data: CreatePostDto, @Res() res: ResponseServer) {
    // data √© totalmente tipado
    const post = {
      id: Date.now(),
      title: data.title,
      content: data.content,
      tags: data.tags
    };
    res.status(201).json({ post });
  }

  @Patch("/:id")
  update(
    @Param("id") id: string,
    @Body() data: UpdatePostDto,
    @Res() res: ResponseServer
  ) {
    // TypeScript sabe que todos os campos s√£o opcionais
    res.json({ id, ...data });
  }
}
```

## Pr√≥ximos Passos üìñ

<Cards>
  <Card title="Routing" href="routing" description="Aprenda sobre padr√µes avan√ßados de rota" />
  <Card title="Valida√ß√£o" href="validation" description="Valide par√¢metros de decorators" />
  <Card title="Middleware" href="middleware" description="Use middleware com decorators" />
  <Card title="Exemplos" href="examples" description="Veja exemplos do mundo real" />
</Cards>
