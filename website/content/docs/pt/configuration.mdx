---
title: Configura√ß√£o
description: Configure sua aplica√ß√£o AzuraJS
icon: Settings
---

# Configura√ß√£o ‚öôÔ∏è

AzuraJS usa um sistema de configura√ß√£o baseado em arquivo que suporta formatos TypeScript, JSON e YAML.

## Arquivo de Configura√ß√£o üìÑ

Crie um arquivo `azura.config.ts` na raiz do seu projeto:

```typescript title="azura.config.ts"
import type { ConfigTypes } from "azurajs/config";

const config: ConfigTypes = {
  environment: "development",
  server: {
    port: 3000,
    cluster: false,
    ipHost: true,
    https: false,
  },
  logging: {
    enabled: true,
    showDetails: true,
  },
  plugins: {
    cors: {
      enabled: true,
      origins: ["*"],
      methods: ["GET", "POST", "PUT", "DELETE", "PATCH"],
      allowedHeaders: ["Content-Type", "Authorization"],
    },
    rateLimit: {
      enabled: false,
      limit: 100,
      timeframe: 60000,
    },
  },
};

export default config;
```

## Op√ß√µes de Configura√ß√£o üîß

### Environment

```typescript
environment: "development" | "production" | "test"
```

Define o ambiente da aplica√ß√£o. Afeta o comportamento de logging e outros recursos espec√≠ficos do ambiente.

<Callout type="info">
  No modo produ√ß√£o, o logging detalhado √© automaticamente desabilitado para melhor performance.
</Callout>

### Configura√ß√£o do Servidor

#### port

```typescript
port: number
```

O n√∫mero da porta em que seu servidor ir√° escutar. Padr√£o: `3000`

```typescript
server: {
  port: 8080
}
```

#### cluster

```typescript
cluster: boolean
```

Habilita modo cluster para utilizar todos os n√∫cleos da CPU. Padr√£o: `false`

```typescript
server: {
  cluster: true  // Cria um worker para cada n√∫cleo da CPU
}
```

<Callout type="warn">
  Modo cluster √© recomendado para produ√ß√£o mas n√£o necess√°rio para desenvolvimento.
</Callout>

#### ipHost

```typescript
ipHost: boolean
```

Exibe o endere√ßo IP da rede local na inicializa√ß√£o. Padr√£o: `false`

```typescript
server: {
  ipHost: true  // Mostra: http://192.168.1.100:3000
}
```

#### https

```typescript
https: boolean
```

Indica se o servidor est√° rodando atr√°s de HTTPS. Afeta a propriedade `req.protocol`. Padr√£o: `false`

### Configura√ß√£o de Logging üìù

#### enabled

```typescript
enabled: boolean
```

Habilita/desabilita logging de requisi√ß√µes. Padr√£o: `true`

#### showDetails

```typescript
showDetails: boolean
```

Mostra informa√ß√µes detalhadas de requisi√ß√£o/resposta incluindo:
- M√©todo e caminho da requisi√ß√£o
- C√≥digo de status da resposta
- Tempo de resposta
- Corpo da requisi√ß√£o (em desenvolvimento)

```typescript
logging: {
  enabled: true,
  showDetails: true
}
```

Exemplo de sa√≠da:
```
‚Üí POST /api/users 201 Created (15ms)
```

### Plugin CORS üåê

Configure Cross-Origin Resource Sharing para sua API.

#### enabled

```typescript
enabled: boolean
```

Habilita/desabilita plugin CORS. Padr√£o: `false`

#### origins

```typescript
origins: string | string[]
```

Origens permitidas para requisi√ß√µes CORS.

```typescript
cors: {
  enabled: true,
  origins: ["https://example.com", "https://app.example.com"]
  // ou permitir todas: origins: ["*"]
}
```

#### methods

```typescript
methods: string | string[]
```

M√©todos HTTP permitidos.

```typescript
cors: {
  methods: ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
}
```

#### allowedHeaders

```typescript
allowedHeaders: string | string[]
```

Cabe√ßalhos de requisi√ß√£o permitidos.

```typescript
cors: {
  allowedHeaders: ["Content-Type", "Authorization", "X-Requested-With"]
}
```

### Plugin Rate Limiting üõ°Ô∏è

Proteja sua API de abusos com rate limiting integrado.

#### enabled

```typescript
enabled: boolean
```

Habilita/desabilita rate limiting. Padr√£o: `false`

#### limit

```typescript
limit: number
```

N√∫mero m√°ximo de requisi√ß√µes por per√≠odo de tempo.

```typescript
rateLimit: {
  enabled: true,
  limit: 100  // 100 requisi√ß√µes por per√≠odo
}
```

#### timeframe

```typescript
timeframe: number
```

Per√≠odo de tempo em milissegundos.

```typescript
rateLimit: {
  limit: 100,
  timeframe: 60000  // 100 requisi√ß√µes por minuto
}
```

<Callout type="warn">
  Quando o limite √© excedido, o servidor responde com `429 Too Many Requests`
</Callout>

## Configura√ß√£o Espec√≠fica por Ambiente üåç

Use vari√°veis de ambiente para diferentes ambientes de deploy:

```typescript title="azura.config.ts"
import type { ConfigTypes } from "azurajs/config";

const isDev = process.env.NODE_ENV !== "production";
const port = process.env.PORT ? parseInt(process.env.PORT) : 3000;

const config: ConfigTypes = {
  environment: isDev ? "development" : "production",
  server: {
    port,
    cluster: !isDev,  // Habilita cluster apenas em produ√ß√£o
    ipHost: isDev,    // Mostra IP apenas em desenvolvimento
    https: !isDev,
  },
  logging: {
    enabled: true,
    showDetails: isDev,  // Logs detalhados apenas em desenvolvimento
  },
  plugins: {
    cors: {
      enabled: true,
      origins: isDev 
        ? ["*"] 
        : ["https://seudominio.com"],
    },
    rateLimit: {
      enabled: !isDev,  // Rate limit apenas em produ√ß√£o
      limit: 100,
      timeframe: 60000,
    },
  },
};

export default config;
```

## Configura√ß√£o JSON üìã

Voc√™ tamb√©m pode usar formato JSON:

```json title="azura.config.json"
{
  "environment": "development",
  "server": {
    "port": 3000,
    "cluster": false
  },
  "logging": {
    "enabled": true,
    "showDetails": true
  }
}
```

## Configura√ß√£o YAML üìÑ

Ou formato YAML:

```yaml title="azura.config.yaml"
environment: development
server:
  port: 3000
  cluster: false
logging:
  enabled: true
  showDetails: true
```

## Acessando Configura√ß√£o em Runtime üîç

Voc√™ pode acessar a configura√ß√£o na sua aplica√ß√£o:

```typescript
const app = new AzuraClient();
const config = app.getConfig();

console.log(`Porta do servidor: ${config.server?.port}`);
console.log(`Ambiente: ${config.environment}`);
```

## Exemplo de Configura√ß√£o Completa üìö

Aqui est√° uma configura√ß√£o completa pronta para produ√ß√£o:

```typescript title="azura.config.ts"
import type { ConfigTypes } from "azurajs/config";

const config: ConfigTypes = {
  environment: "production",
  server: {
    port: 8080,
    cluster: true,
    ipHost: false,
    https: true,
  },
  logging: {
    enabled: true,
    showDetails: false,
  },
  plugins: {
    cors: {
      enabled: true,
      origins: [
        "https://seudominio.com",
        "https://app.seudominio.com"
      ],
      methods: ["GET", "POST", "PUT", "DELETE", "PATCH"],
      allowedHeaders: [
        "Content-Type", 
        "Authorization",
        "X-API-Key"
      ],
    },
    rateLimit: {
      enabled: true,
      limit: 1000,
      timeframe: 60000, // 1000 requisi√ß√µes por minuto
    },
  },
};

export default config;
```

## Pr√≥ximos Passos üìñ

<Cards>
  <Card title="Controllers" href="controllers" description="Aprenda sobre padr√µes de controllers" />
  <Card title="Middleware" href="middleware" description="Adicione middleware personalizado" />
  <Card title="CORS" href="cors" description="Mergulhe fundo na configura√ß√£o CORS" />
  <Card title="Rate Limiting" href="rate-limiting" description="Padr√µes avan√ßados de rate limiting" />
</Cards>
